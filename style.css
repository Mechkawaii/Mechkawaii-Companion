:root{
  --bg:#0b0b0e;
  --panel:#13131a;
  --panel2:#0f0f15;
  --text:#f2f2f2;
  --muted:#b9b9c3;
  --accent:#ffd200;
  --danger:#ff4d4d;
  --ok:#3ddc97;
  --border:rgba(255,255,255,.10);
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --radius:16px;
  --radius2:12px;
  --maxw: 980px;
  font-synthesis-weight:none;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  background: radial-gradient(1200px 700px at 20% 0%, rgba(255,210,0,.08), transparent 55%),
              radial-gradient(900px 600px at 80% 10%, rgba(61,220,151,.07), transparent 50%),
              var(--bg);
  color:var(--text);
}

a{color:inherit}
.container{
  width: min(var(--maxw), calc(100% - 32px));
  margin: 0 auto;
  padding: 24px 0 64px;
}
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding: 12px 14px;
  border:1px solid var(--border);
  background: rgba(19,19,26,.75);
  backdrop-filter: blur(10px);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.brand{
  display:flex; flex-direction:column; gap:2px;
}
.brand .title{
  font-weight:800;
  letter-spacing:.5px;
}
.brand .subtitle{
  color:var(--muted);
  font-size: 13px;
}

.controls{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
.pill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 10px 12px;
  border-radius: 999px;
  border:1px solid var(--border);
  background: rgba(15,15,21,.7);
}
select, button, input[type="checkbox"]{
  font: inherit;
}
button{
  cursor:pointer;
  border:1px solid var(--border);
  background: rgba(15,15,21,.8);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  transition: transform .04s ease, border-color .2s ease, background .2s ease;
}
button:hover{border-color: rgba(255,210,0,.45)}
button:active{transform: translateY(1px)}
.btn-accent{
  border-color: rgba(255,210,0,.55);
  background: rgba(255,210,0,.12);
}
.btn-danger{
  border-color: rgba(255,77,77,.55);
  background: rgba(255,77,77,.10);
}

.grid{
  margin-top:18px;
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap:16px;
}
@media (max-width: 900px){
  .grid{grid-template-columns: 1fr}
}

.card{
  border:1px solid var(--border);
  border-radius: var(--radius);
  background: rgba(19,19,26,.72);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.card .card-h{
  padding: 14px 16px;
  background: rgba(15,15,21,.65);
  border-bottom:1px solid var(--border);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.card .card-b{padding: 14px 16px}
.h1{
  font-size: 28px;
  margin:0;
  letter-spacing:.6px;
}
.meta{
  color:var(--muted);
  font-size: 14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 6px 10px;
  border-radius: 999px;
  border:1px solid var(--border);
  background: rgba(15,15,21,.75);
  color: var(--muted);
  font-size: 13px;
}

.hp{
  display:flex;
  align-items:center;
  gap:10px;
}
.hearts{display:flex; gap:6px; align-items:center}
.heart{
  width: 22px;
  height: 22px;
  display:inline-block;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,.25));
}
.hp-ctl{display:flex; gap:8px}
.hp-ctl button{padding: 8px 10px; border-radius: 10px}

.section-title{
  font-weight:800;
  letter-spacing:.4px;
  margin: 0 0 8px 0;
}
.text{
  color: var(--muted);
  line-height: 1.5;
  margin:0;
}
.rule{
  margin-top: 12px;
  padding: 12px 12px;
  border-radius: var(--radius2);
  border:1px solid var(--border);
  background: rgba(11,11,14,.55);
}
.rule h3{margin:0 0 6px 0; font-size: 16px}
.rule p{margin:0; color: var(--muted); line-height: 1.5}

.toggles{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:10px;
}
@media (max-width: 520px){
  .toggles{grid-template-columns: 1fr}
}
.toggle{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding: 12px 12px;
  border-radius: var(--radius2);
  border:1px solid var(--border);
  background: rgba(11,11,14,.55);
}
.toggle .lbl{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.toggle .lbl .t{
  font-weight:700;
}
.toggle .lbl .d{
  color:var(--muted);
  font-size: 12px;
}

.switch{
  width: 46px;
  height: 28px;
  border-radius: 999px;
  border:1px solid var(--border);
  background: rgba(255,255,255,.08);
  position:relative;
  flex: 0 0 auto;
}
.switch::after{
  content:"";
  position:absolute;
  top:3px; left:3px;
  width: 22px; height: 22px;
  border-radius: 50%;
  background: rgba(255,255,255,.85);
  transition: transform .15s ease, background .15s ease;
}
.switch.on{
  border-color: rgba(61,220,151,.55);
  background: rgba(61,220,151,.14);
}
.switch.on::after{
  transform: translateX(18px);
  background: rgba(255,255,255,.92);
}

.patterns{
  display:grid;
  grid-template-columns: 1fr;
  gap:12px;
}
.pattern{
  border:1px solid var(--border);
  border-radius: var(--radius2);
  background: rgba(11,11,14,.55);
  overflow:hidden;
}
.pattern .ph{
  padding: 10px 12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  border-bottom:1px solid var(--border);
}
.pattern .ph .k{font-weight:800}
.pattern img{
  width: 100%;
  height: auto;
  display:block;
}
.small{
  color: var(--muted);
  font-size: 13px;
}
.list{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:12px;
  margin-top: 18px;
}
@media (max-width: 820px){
  .list{grid-template-columns: repeat(2, 1fr)}
}
@media (max-width: 520px){
  .list{grid-template-columns: 1fr}
}
.char{
  display:block;
  text-decoration:none;
  border:1px solid var(--border);
  border-radius: var(--radius);
  background: rgba(19,19,26,.68);
  padding: 14px 14px;
  box-shadow: var(--shadow);
}
.char:hover{border-color: rgba(255,210,0,.45)}
.char .n{font-weight:900; letter-spacing:.4px; font-size:18px}
.char .m{margin-top:6px; color:var(--muted); font-size: 13px; display:flex; gap:8px; flex-wrap:wrap}
.footer-note{
  margin-top: 18px;
  color: var(--muted);
  font-size: 13px;
}

/* Splash screen */
.splash{
  margin-top:16px;
  border:1px solid var(--border);
  border-radius: var(--radius);
  background: rgba(19,19,26,.72);
  box-shadow: var(--shadow);
  overflow:hidden;
}
.splash .hero{ position:relative; }
.splash .hero img{ width:100%; height:auto; display:block; }
.splash .overlay{
  position:absolute; inset:0;
  background: linear-gradient(to top, rgba(0,0,0,.75), rgba(0,0,0,.1));
}
.splash .content{
  position:absolute;
  left:16px; right:16px; bottom:16px;
  display:flex; justify-content:space-between; align-items:flex-end;
  gap:12px; flex-wrap:wrap;
}
.splash .title{
  font-size:28px; font-weight:900; letter-spacing:.8px;
}
.splash .tag{ color:var(--muted); font-size:14px; }

.btn-raw{
  background: transparent;
  border: 0;
  padding: 0;
  cursor: pointer;
}
.btn-raw img{
  width: min(520px, 80vw);
  height: auto;
  display: block;
}
.btn-raw:active{ transform: translateY(1px); }

/* --- Splash (Mechkawaii Companion) --- */
.splash-full{
  margin-top:16px;
  border-radius: 18px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,0.10);
}
.hero{ position:relative; }
.hero-bg{ width:100%; height: auto; display:block; filter: none; }
.overlay{
  position:absolute; inset:0;
  background: rgba(0,0,0,0.35);
}
.hero-ui{
  position:absolute; inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding: 22px;
}
.brand{
  position:absolute;
  top: 28px;
  left: 50%;
  transform: translateX(-50%);
  display:flex;
  align-items:flex-start;
  justify-content:center;
}
.brand .logo{
  width: min(780px, 88vw);
  height:auto;
  display:block;
}
.brand .mascot{
  width: clamp(140px, 45vw, 320px);
  height:auto;
  margin-left: 12px;
  margin-top: -10px;
  display:block;
  filter: drop-shadow(0 6px 16px rgba(0,0,0,0.35));
}
.menu{
  margin-top: 90px;
  display:flex;
  flex-direction:column;
  gap: 16px;
  align-items:center;
  justify-content:center;
}
.menu .menu-btn{
  width: min(520px, 80vw);
  height: 64px;
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.18);
  background: rgba(26,20,34,0.86);
  color: rgba(255,255,255,0.95);
  font-weight: 900;
  letter-spacing: 4px;
  font-size: 20px;
  cursor:pointer;
  box-shadow: 0 10px 24px rgba(0,0,0,0.25);
}
.menu .menu-btn:hover{
  border-color: rgba(255,79,216,0.45);
}
.menu .menu-btn:active{
  transform: translateY(1px);
}
.linkbtn{ text-decoration:none; }
@media (max-width: 420px){
  .brand{ top: 18px; }
  .menu{ margin-top: 60px; gap: 12px; }
  .brand .mascot{ margin-top: -6px; }
}

.mkw-btn{
  position: relative;
  width: min(520px, 80vw);
  cursor: pointer;
}
.mkw-btn img{
  width: 100%;
  height: auto;
  display: block;
}
.mkw-label{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  letter-spacing: 6px;
  font-size: 22px;
  color: #ffffff;
  text-shadow:
    0 2px 8px rgba(0,0,0,0.6),
    0 0 12px rgba(255,79,216,0.35);
  pointer-events: none;
}
.mkw-btn:hover{ filter: brightness(1.08); }
.mkw-btn:active{ transform: translateY(1px); }


/* --- Micro-animations (splash polish) --- */
@keyframes mkw-float {
  0%   { transform: translateY(0px) rotate(-2deg); }
  50%  { transform: translateY(-6px) rotate(2deg); }
  100% { transform: translateY(0px) rotate(-2deg); }
}
@keyframes mkw-glow {
  0%   { filter: drop-shadow(0 0 0 rgba(255,79,216,0.0)) drop-shadow(0 0 0 rgba(255,181,107,0.0)); }
  50%  { filter: drop-shadow(0 0 14px rgba(255,79,216,0.55)) drop-shadow(0 0 18px rgba(255,181,107,0.35)); }
  100% { filter: drop-shadow(0 0 0 rgba(255,79,216,0.0)) drop-shadow(0 0 0 rgba(255,181,107,0.0)); }
}

/* Heart mascot: subtle float */
.brand .mascot{
  animation: mkw-float 2.8s ease-in-out infinite;
  transform-origin: 50% 60%;
}

/* Play button: pulsing glow */
#playBtn.mkw-btn{
  animation: mkw-glow 1.8s ease-in-out infinite;
}
#playBtn.mkw-btn:hover{
  animation-duration: 1.2s;
}
#playBtn.mkw-btn:active{
  animation: none;
  filter: drop-shadow(0 0 18px rgba(255,79,216,0.55));
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .brand .mascot, #playBtn.mkw-btn{ animation: none !important; }
}


/* --- Splash overlay fixes --- */
.splash-full{
  position: fixed;
  inset: 0;
  margin: 0 !important;
  border-radius: 0 !important;
  z-index: 9999;
  background: #000;
}

/* Center brand + small mascot above logo */
.splash-full .brand{
  position: relative !important;
  top: auto !important;
  left: auto !important;
  transform: none !important;
  display:flex;
  align-items:center;
  justify-content:center;
  width: min(860px, 92vw);
}
.splash-full .brand .logo{
  width: 100% !important;
}
.splash-full .brand .mascot{
  position: absolute;
  top: -46px;
  left: 50%;
  transform: translateX(-50%);
  width: clamp(44px, 9vw, 86px) !important;
  margin: 0 !important;
  animation: mkw-float 2.8s ease-in-out infinite;
  filter: drop-shadow(0 10px 22px rgba(0,0,0,0.45));
}

/* Menu spacing under logo */
.splash-full .menu{
  margin-top: 42px !important;
}

/* Hide underlying UI while splash is visible (even if it exists in DOM) */
body.has-splash .topbar,
body.has-splash #setupCard,
body.has-splash #draftCard,
body.has-splash #charList,
body.has-splash .footer-note,
body.has-splash .controls{
  visibility: hidden;
}

/* If the splash has already been dismissed, hide it immediately (prevents desktop "flash")
   and reveal the UI even before JS finishes booting. */
html.splash-dismissed body.has-splash #splash,
html.splash-dismissed body.has-splash .splash-overlay{
  display: none !important;
}
html.splash-dismissed body.has-splash .topbar,
html.splash-dismissed body.has-splash #setupCard,
html.splash-dismissed body.has-splash #draftCard,
html.splash-dismissed body.has-splash .footer-note,
html.splash-dismissed body.has-splash .controls{
  visibility: visible !important;
}


/* --- Splash overlay (final) --- */
.splash-overlay{
  position: fixed;
  inset: 0;
  margin: 0;
  border-radius: 0;
  z-index: 9999;
  overflow: hidden;
  border: none;
}
.splash-overlay .hero,
.splash-overlay .hero-ui{ height: 100%; }
.splash-overlay .hero-bg{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.splash-overlay .overlay{
  position:absolute;
  inset:0;
  background: rgba(0,0,0,0.38);
}
.splash-overlay .hero-ui{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap: 22px;
  padding: 28px 18px;
}
.brand-stack{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap: 10px;
  margin-bottom: 6px;
}
.brand-stack .logo{
  width: min(640px, 92vw);
  height:auto;
  display:block;
  filter: drop-shadow(0 10px 28px rgba(0,0,0,0.35));
}
.brand-stack .mascot{
  width: clamp(45vw);
  height:auto;
  display:block;
  filter: drop-shadow(0 8px 22px rgba(0,0,0,0.35));
}
.splash-overlay .menu{
  display:flex;
  flex-direction:column;
  gap: 14px;
  align-items:center;
  justify-content:center;
}
.mkw-link{ text-decoration:none; }
.mkw-btn{
  position: relative;
  width: min(520px, 80vw);
  cursor: pointer;
}
.mkw-btn img{
  width: 100%;
  height: auto;
  display: block;
}
.mkw-label{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  letter-spacing: 6px;
  font-size: 22px;
  color: #ffffff;
  text-shadow:
    0 2px 10px rgba(0,0,0,0.65),
    0 0 12px rgba(255,79,216,0.35);
  pointer-events: none;
}
.mkw-btn:hover{ filter: brightness(1.08); }
.mkw-btn:active{ transform: translateY(1px); }

/* Smaller typography on very small screens */
@media (max-width: 380px){
  .mkw-label{ font-size: 18px; letter-spacing: 5px; }
}


/* ===== Desktop Splash UI Fix (compact & truly responsive) ===== */
@media (min-width: 900px){
  /* Prevent the splash from feeling "mobile giant" on desktop */
  .splash-overlay .hero-ui{
    overflow-y: auto;
    gap: 14px;
    padding: 22px;
  }

  /* Keep brand assets reasonable on large screens */
  .brand-stack .logo{
    width: clamp(260px, 28vw, 420px);
    max-height: 26vh;
    object-fit: contain;
  }

  .brand-stack .mascot{
    width: clamp(44px, 4.5vw, 64px);
    max-height: 8vh;
    object-fit: contain;
  }

  /* Buttons shouldn't become billboards */
  .mkw-btn{
    width: clamp(240px, 22vw, 340px);
  }

  .mkw-label{
    font-size: 18px;
    letter-spacing: 5px;
  }
}


  .brand-stack .logo{
    width: min(420px, 60vw);
  }

  .brand-stack .mascot{
    width: 56px;
  }

  .mkw-btn{
    width: min(340px, 38vw);
  }

  .mkw-label{
    font-size: 18px;
    letter-spacing: 5px;
  }
}

.splash-overlay .hero-bg{
  pointer-events: none;
}


/* --- Responsive splash sizing + uniform buttons (v1.3.8) --- */
.brand-stack .logo{
  width: clamp(180px, 60vw, 420px);
  height: auto;
}

.brand-stack .mascot{
  width: clamp(44px, 12vw, 64px);
  height: auto;
}

.splash-overlay .mkw-btn,
.splash-overlay a.mkw-btn,
.splash-overlay .link-btn{
  width: clamp(220px, 80vw, 360px);
  max-width: 90vw;
  padding: 14px 18px;
  font-size: clamp(14px, 4vw, 16px);
  line-height: 1.2;
  box-sizing: border-box;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
}

  /* option: centrer la pill (plus clean visuellement) */
  .controls .pill{
    margin: 0 auto;
  }
}
